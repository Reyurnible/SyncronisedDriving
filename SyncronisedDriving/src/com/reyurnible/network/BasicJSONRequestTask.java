package com.reyurnible.network;import org.json.JSONObject;import android.util.Log;import com.android.volley.Request;import com.android.volley.RequestQueue;import com.android.volley.Response;import com.android.volley.VolleyError;import com.android.volley.Response.Listener;import com.reyurnible.system.AppConfig;//ストアの一覧を取得public class BasicJSONRequestTask{	private NetworkTaskCallback callback;	private String requestFrom;		public BasicJSONRequestTask(final NetworkTaskCallback callback,final String requestFrom) {		  this.callback = callback;		  this.requestFrom = requestFrom;	}	public void onRequest(RequestQueue mQueue,final Request.Priority requestPriority,final String url,final NetworkTasks task){		this.onRequest(mQueue, requestPriority, url, task,null);	}		public void onRequest(RequestQueue mQueue,final Request.Priority requestPriority,final String url,final NetworkTasks task,JSONObject params){		if(AppConfig.DEBUG){			Log.d(this.getClass().getSimpleName(),url);		}		CustomJSONRequest request = new CustomJSONRequest(task.method, url, params ,new Listener<JSONObject>() {			@Override			public void onResponse(JSONObject response) {				try{					if(AppConfig.DEBUG){						Log.d(this.getClass().getSimpleName(),response.toString());					}					callback.onSuccessNetworkTask(task.id, response);				}catch(IllegalStateException e){					e.printStackTrace();				}			}		},		new Response.ErrorListener() {			@Override 			public void onErrorResponse(VolleyError error) {				try{					if(AppConfig.DEBUG){						Log.d(this.getClass().getSimpleName(),"error:"+error.toString());					}					callback.onFailedNetworkTask(task.id);				}catch(IllegalStateException e){					e.printStackTrace();				}			}		});		request.setPriority(requestPriority);		request.setTag(requestFrom);		mQueue.add(request);	}}